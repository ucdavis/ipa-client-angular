<nav year="{{ year }}" workgroup-id="{{ workgroupId }}"></nav>

<!-- <div ng-if="!noAccess && !view.state.calculations.calculatedView.ui.currentBudgetScenarios" class="overlay">
  <spinner class="vertical-center"></spinner>
</div> -->

<ipa-header
  page-title="TA/Reader Utilization Report"
  class="do-not-print"
></ipa-header>

<div ng-if="noAccess">
  <no-access workgroup-name="sharedState.workgroup.name"></no-access>
</div>

<div
  ng-show="!noAccess && view.state.calculations.calculatedView.ui.currentBudgetScenarios"
  class="do-not-print budget-comparison-report__scenario-selector-tray"
>
  <!-- Toolbar -->
  <div
    class="row hidden-print"
    style="clear: both; display: block; width: 100%;"
  >
    <div class="table-toolbar">
      <div class="btn-group">
        <span
          data-toggle="tooltip"
          data-placement="top"
          data-original-title="Download as Excel"
          data-container="body"
          ng-click="downloadAsExcel()"
          class="tool-icon glyphicon glyphicon-download-alt"
          aria-haspopup="true"
          aria-expanded="false"
        ></span>
      </div>
      <span
        data-toggle="tooltip"
        data-placement="top"
        data-original-title="Print"
        ng-click="print()"
        class="tool-icon glyphicon glyphicon-print"
      ></span>
    </div>
  </div>
</div>

<div class="ta-reader-utilization-report__tabs">
  <ipa-tabs
    tab-names="view.state.ui.reportViews"
    active-tab="view.state.ui.selectedReport"
    select-tab="selectReportView"
  ></ipa-tabs>
</div>

<div class="ta-reader-utilization-report__container" ng-if="view.state.ui.selectedReport === 'Teaching Assistants'">
  <div
    ng-repeat="(term, sectionGroups) in view.state.calculations.calculatedView.sortedByTerm"
  >
    <div class="ta-reader-utilization-report__table-label">
      {{ view.state.calculations.calculatedView.termDescriptions[term] }}
    </div>

    <ta-utilization-table
      fetch-complete="view.state.calculations.isInitialFetchComplete"
      show-table="view.state.calculations.calculatedView.taAppointmentsByTerm[term] > 0"
      section-groups="sectionGroups"
    ></ta-utilization-table>
  </div>
</div>

<div class="ta-reader-utilization-report__container" ng-if="view.state.ui.selectedReport === 'Readers'">
  <div
    ng-repeat="(term, sectionGroups) in view.state.calculations.calculatedView.sortedByTerm"
  >
    <div class="ta-reader-utilization-report__table-label">
      {{ view.state.calculations.calculatedView.termDescriptions[term] }}
    </div>

    <reader-utilization-table
      fetch-complete="view.state.calculations.isInitialFetchComplete"
      show-table="view.state.calculations.calculatedView.readerAppointmentsByTerm[term] > 0"
      section-groups="sectionGroups"
    ></reader-utilization-table>
  </div>
</div>
