<nav year="{{ year }}" workgroup-id="{{ workgroupId }}"></nav>

<!-- <div ng-if="!noAccess && !view.state.calculations.calculatedView.ui.currentBudgetScenarios" class="overlay">
  <spinner class="vertical-center"></spinner>
</div> -->

<ipa-header
  page-title="TA/Reader Utilization Report"
  class="do-not-print"
></ipa-header>

<div ng-if="noAccess">
  <no-access workgroup-name="sharedState.workgroup.name"></no-access>
</div>

<div
  ng-show="!noAccess && view.state.calculations.calculatedView.ui.currentBudgetScenarios"
  class="do-not-print budget-comparison-report__scenario-selector-tray"
>
  <!-- Toolbar -->
  <div
    class="row hidden-print"
    style="clear: both; display: block; width: 100%;"
  >
    <div class="table-toolbar">
      <div class="btn-group">
        <span
          data-toggle="tooltip"
          data-placement="top"
          data-original-title="Download as Excel"
          data-container="body"
          ng-click="downloadAsExcel()"
          class="tool-icon glyphicon glyphicon-download-alt"
          aria-haspopup="true"
          aria-expanded="false"
        ></span>
      </div>
      <span
        data-toggle="tooltip"
        data-placement="top"
        data-original-title="Print"
        ng-click="print()"
        class="tool-icon glyphicon glyphicon-print"
      ></span>
    </div>
  </div>
</div>

<div class="" ng-repeat="(term, sectionGroups) in view.state.sectionGroups.sortedByTerm">
  <div class="ta-reader-utilization-report__table-label">{{ view.state.sectionGroups.termDescriptions[term] }}</div>
  <table class="ta-reader-utilization-report__table">
    <colgroup>
      <col span="1" style="width: 15%;" />
      <col span="1" style="width: 10%;" />
      <col span="1" style="width: 15%;" />
      <col span="1" style="width: 10%;" />
      <col span="1" style="width: 10%;" />
      <col span="1" style="width: 10%;" />
      <col span="1" style="width: 10%;" />
      <col span="1" style="width: 10%;" />
      <col span="1" style="width: 10%;" />
    </colgroup>
    <thead>
      <th class="ta-reader-utilization-report__table--header">Course</th>
      <th class="ta-reader-utilization-report__table--header">Section</th>
      <th class="ta-reader-utilization-report__table--header">Title</th>
      <th class="ta-reader-utilization-report__table--header">Anticipated Enrollment</th>
      <th class="ta-reader-utilization-report__table--header">Previous Enrollment</th>
      <th class="ta-reader-utilization-report__table--header">TA Count</th>
      <th class="ta-reader-utilization-report__table--header">Section Per TA</th>
      <th class="ta-reader-utilization-report__table--header">TA Funds</th>
      <th class="ta-reader-utilization-report__table--header">FTE Per Section</th>
    </thead>
    <tr ng-hide="view.state.calculations.isInitialFetchComplete">
      <td>
        <spinner></spinner>
      </td>
    </tr>
    <tr>
      <td
        colspan="9"
        style="text-align: center;"
        ng-if="view.state.sectionGroups.ids.length == 0"
      >
        No schedule data available.
      </td>
    </tr>
    <tbody
      ng-show="view.state.calculations.isInitialFetchComplete"
      ng-repeat="sectionGroup in sectionGroups"
    >
      <tr class="ta-reader-utilization-report__row">
        <!-- Course -->
        <td class="ta-reader-utilization-report__table--value">
          {{ sectionGroup.subjectCode }}
          {{ sectionGroup.courseNumber }}
        </td>

        <!-- Sequence Number -->
        <td class="ta-reader-utilization-report__table--value">
          {{ sectionGroup.sequencePattern }}
        </td>

        <!-- Title -->
        <td class="ta-reader-utilization-report__table--value">
          {{ sectionGroup.title }}
        </td>

        <!-- Anticipated Enrollment -->
        <td class="ta-reader-utilization-report__table--value">
            {{ sectionGroup.plannedSeats }}
        </td>

        <!-- Previous Enrollment -->
        <td class="ta-reader-utilization-report__table--value">
          <div ng-if="sectionGroup.lastOfferedEnrollment">
            {{ sectionGroup.lastOfferedEnrollment }} ({{
              sectionGroup.lastOfferedTermDescription
            }})
          </div>
        </td>

        <!-- TA Count (Appointments) -->
        <td class="ta-reader-utilization-report__table--value">
          {{ sectionGroup.teachingAssistantAppointments }}
        </td>

        <!-- Section Per TA -->
        <td class="ta-reader-utilization-report__table--value">
          {{}}
        </td>

        <!-- TA Funds -->
        <td class="ta-reader-utilization-report__table--value">
          {{ sectionGroup.taCost }}
        </td>

        <!-- FTE Per Section -->
        <td class="ta-reader-utilization-report__table--value">
          {{}}
        </td>
      </tr>
    </tbody>
  </table>
</div>
